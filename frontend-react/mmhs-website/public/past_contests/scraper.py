import os
import requests

# Example map
mp = {
    '2008/CCC2008S5NukitDP.txt': '2008s5',
    '2009/CCC2009S4ShipAndShopDijkstra.txt': '2009s4',
    '2009/CCC2009S5WirelessV2.txt': '2009s5',
    '2012/s42012_kl.txt': '2012s4',
    '2014/2014s4zihaozhang2.txt': '2014s4',
    '2005/CCC2005S5PinBallRankingTree.txt': '2005s5',
    '2000/ccc2000j5AhmedSabie.txt': '2000j5',
    '2007/CCC2007S3FriendsV2.txt': '2007s3',
    '2000/S4GolfBFS.txt': '2000s4',
    '2003/S4Substringscl.txt': '2003s4',
    '2014/2014S4SweepLineCalvinLiu.txt': '2014s4',
    '2015/2015S4CalvinLiu.txt': '2015s4',
    '2011/j5v3.txt': '2011j5',
    '2012/s12012.txt': '2012s1',
    '2015/2015s4DanielWhitney.txt': '2015s4',
    '2015/2015s5DanielWhitney.txt': '2015s5',
    '2009/CCC2009S1CoolNumbers6a.txt': '2009s1',
    '2008/CCC2008S4TwentyFourRPN.txt': '2008s4',
    '2001/S5PostHT.txt': '2001s5',
    '2013/ccc2013j5johnsonchen.txt': '2013j5',
    '2013/ccc2013s3johnsonchen.txt': '2013s3',
    '2006/CCC2006s3TinCanTelephoneVector.txt': '2006s3',
    '2006/CCC2006s5OriginofLifeV2.txt': '2006s5',
    '2005/2005j5bananasnonrecursion.txt': '2005j5',
    '2014/2014s5jacobjackson.txt': '2014s5',
    '2013/ccc2013s3kk.txt': '2013s3',
    '2012/s52012KL.txt': '2012s5',
    '2008/CCC2008S3MazeBFS.txt': '2008s3',
    '2007/j5dpv2.txt': '2007j5',
    '2007/CCC2007S5BowlingForNumbersDP.txt': '2007s5',
    '2007/CCC2007S4WaterparkRecursion.txt': '2007s4',
    '2015/2015s3MatthewLee.txt': '2015s3',
    '2013/ccc2013s2NB.txt': '2013s2',
    '2010/j52010PS.txt': '2010j5',
    '2005/CCC2005s5PinballRankingCounting.txt': '2005s5',
    '2006/CCC2006s5OriginofLife.txt': '2006s5',
    '2004/S4SpaceTurtlePeng.txt': '2004s4',
    '2001/CCC2001S4Cookies.txt': '2001s4',
    '2000/S5SheepandCoyotesPBMethod.txt': '2000s5',
    '2005/CCC2005s5PinballRankingMerge.txt': '2005s5',
    '2011/j5Unfriendsf.txt': '2011j5',
    '2011/s5switchsf.txt': '2011s5',
    '2010/S32010sf.txt': '2010s3',
    '2010/S52010VLv2.txt': '2010s5',
    '2003/S4Substrings.txt': '2003s4',
    '2003/S5Trucking.txt': '2003s5',
    '2002/S4BridgeCrossing.txt': '2002s4',
    '2010/s32010VS.txt': '2010s3',
    '2015/2015s3WeiweiZhong.txt': '2015s3',
    '2007/j5recursion.txt': '2007j5',
    '2015/2015j1.txt': '2015j1',
    '2015/2015j2.txt': '2015j2',
    '2015/2015j3.txt': '2015j3',
    '2015/2015j4.txt': '2015j4',
    '2015/2015j5.txt': '2015j5',
    '2015/2015s1.txt': '2015s1',
    '2015/2015s2.txt': '2015s2',
    '2014/2014j1.txt': '2014j1',
    '2014/2014j2.txt': '2014j2',
    '2014/2014j3.txt': '2014j3',
    '2014/2014j4.txt': '2014j4',
    '2014/2014j5.txt': '2014j5',
    '2014/2014s1.txt': '2014s1',
    '2014/2014s2.txt': '2014s2',
    '2014/2014s3.txt': '2014s3',
    '2013/ccc2013j1.txt': '2013j1',
    '2013/ccc2013j2.txt': '2013j2',
    '2013/ccc2013j3.txt': '2013j3',
    '2013/ccc2013j4.txt': '2013j4',
    '2013/ccc2013j5.txt': '2013j5',
    '2013/ccc2013s1.txt': '2013s1',
    '2013/ccc2013s3.txt': '2013s3',
    '2013/ccc2013s4.txt': '2013s4',
    '2013/ccc2013s5.txt': '2013s5',
    '2013/ccc2013s5fast.txt': '2013s5',
    '2012/J12012.txt': '2012j1',
    '2012/J22012.txt': '2012j2',
    '2012/J32012.txt': '2012j3',
    '2012/J42012.txt': '2012j4',
    '2012/J52012v2.txt': '2012j5',
    '2012/s22012.txt': '2012s2',
    '2012/s32012.txt': '2012s3',
    '2011/j1aliens.txt': '2011j1',
    '2011/j2wind.txt': '2011j2',
    '2011/j3sumac.txt': '2011j3',
    '2011/j4boring.txt': '2011j4',
    '2011/j5Unfriend.txt': '2011j5',
    '2011/s1English.txt': '2011s1',
    '2011/s2multiplechoice.txt': '2011s2',
    '2011/s3aliceCrystal.txt': '2011s3',
    '2011/s4blood.txt': '2011s4',
    '2011/s5switch.txt': '2011s5',
    '2010/j12010.txt': '2010j1',
    '2010/j22010.txt': '2010j2',
    '2010/j32010.txt': '2010j3',
    '2010/j42010.txt': '2010j4',
    '2010/j52010.txt': '2010j5',
    '2010/S12010.txt': '2010s1',
    '2010/S22010.txt': '2010s2',
    '2010/S32010v3.txt': '2010s3',
    '2010/S42010.txt': '2010s4',
    '2009/ccc2009j1isbn.txt': '2009j1',
    '2009/ccc2009j2fishin.txt': '2009j2',
    '2009/ccc2009j3goodtimes.txt': '2009j3',
    '2009/ccc2009j4signage.txt': '2009j4',
    '2009/CCC2009S3DegreesofSeparation.txt': '2009s3',
    '2009/CCC2009S1CoolNumbers.txt': '2009s1',
    '2009/CCC2009S1CoolNumbers6.txt': '2009s1',
    '2009/CCC2009S2Lights.txt': '2009s2',
    '2009/CCC2009S4ShipAndShop.txt': '2009s4',
    '2009/CCC2009S5Wireless.txt': '2009s5',
    '2008/j1bmi.txt': '2008j1',
    '2008/j2shuffle.txt': '2008j2',
    '2008/j3gps.txt': '2008j3',
    '2008/j4pretopost.txt': '2008j4',
    '2008/CCC2008J5NukitRecursion.txt': '2008j5',
    '2008/CCC2008S1ItsColdHere.txt': '2008s1',
    '2008/CCC2008S2PenniesInTheRing.txt': '2008s2',
    '2008/CCC2008S3Maze.txt': '2008s3',
    '2008/CCC2008S4TwentyFour.txt': '2008s4',
    '2008/CCC2008S5NukitRecursion.txt': '2008s5',
    '2007/j1.txt': '2007j1',
    '2007/j2.txt': '2007j2',
    '2007/j3.txt': '2007j3',
    '2007/j4.txt': '2007j4',
    '2007/j5.txt': '2007j5',
    '2007/CCC2007S1FederalVotingAge.txt': '2007s1',
    '2007/CCC2007S2Boxes.txt': '2007s2',
    '2007/CCC2007S4Waterpark.txt': '2007s4',
    '2006/2006j1ccc.txt': '2006j1',
    '2006/2006j2dice.txt': '2006j2',
    '2006/2006j3cellphone.txt': '2006j3',
    '2006/2006j4teentasks.txt': '2006j4',
    '2006/2006j5othello.txt': '2006j5',
    '2006/CCC2006s1Maternity.txt': '2006s1',
    '2006/CCC2006s2CipherTexts.txt': '2006s2',
    '2006/CCC2006s2CipherTextsv2.txt': '2006s2',
    '2006/CCC2006s3TinCanTelephone.txt': '2006s3',
    '2006/CCC2006s4Groups.txt': '2006s4',
    '2005/2005j1cellsell.txt': '2005j1',
    '2005/2005j2rsa.txt': '2005j2',
    '2005/2005j3returninghome.txt': '2005j3',
    '2005/2005j4crossspiral.txt': '2005j4',
    '2005/2005j5bananas.txt': '2005j5',
    '2005/CCC2005s1SnowCalls.txt': '2005s1',
    '2005/CCC2005s2MouseMoves.txt': '2005s2',
    '2005/CCC2005s3QuantumOperations.txt': '2005s3',
    '2005/CCC2005s4PyramidMessageScheme.txt': '2005s4',
    '2005/CCC2005s5PinballRanking.txt': '2005s5',
    '2004/j1squares.txt': '2004j1',
    '2004/j2termsofoffice.txt': '2004j2',
    '2004/j3similes.txt': '2004j3',
    '2004/j4encryption.txt': '2004j4',
    '2004/j5fractals.txt': '2004j5',
    '2004/S1Fix.txt': '2004s1',
    '2004/S2TopYodeller.txt': '2004s2',
    '2004/S3SpreadSheet.txt': '2004s3',
    '2004/S5SuperPlumberDP.txt': '2004s5',
    '2003/j1trident.txt': '2003j1',
    '2003/j2picture.txt': '2003j2',
    '2003/j3snakes&amp;ladders.txt': '2003j3',
    '2003/j4poetry.txt': '2003j4',
    '2003/S3J5Floor.txt': '2003s3',
    '2002/j1digits.txt': '2002j1',
    '2002/j2americanadian.txt': '2002j2',
    '2002/j3studentcouncil.txt': '2002j3',
    '2002/j4fraction.txt': '2002j4',
    '2002/S3J5Blindfold.txt': '2002s3',
    '2002/S5Bounce.txt': '2002s5',
    '2001/j1bowtie.txt': '2001j1',
    '2001/j2modinverse.txt': '2001j2',
    '2001/j3s1keepingscore.txt': '2001j3',
    '2001/j4s2spirals.txt': '2001j4',
    '2001/J5S3Bombing.txt': '2001j5',
    '2001/S5Post.txt': '2001s5',
    '2000/j1calendar.txt': '2000j1',
    '2000/j29966.txt': '2000j2',
    '2000/j3slot.txt': '2000j3',
    '2000/j4brooks.txt': '2000j4',
    '2000/J5Surfin.txt': '2000j5',
    '2000/S4Golf.txt': '2000s4',
    '2000/S5SheepandCoyotes.txt': '2000s5',
}

# Base URL
base_url = 'https://mmhs.ca/ccc/'

# Iterate through the map
for url_path, code in mp.items():
    # Extract year and code from 'code' (assuming last 3 characters are the contest type)
    year = code[:4]
    contest_type = code[4:]
    
    if int(year) < 2006:
        # Construct the full URL
        full_url = base_url + url_path
        
        try:
            # Send the request and get the content
            response = requests.get(full_url)
            response.raise_for_status()  # Check if the request was successful
            content = response.text
            
            # Define the directory and file path
            dir_path = os.path.join(year, contest_type)
            file_path = os.path.join(dir_path, 'solution.txt')
            
            # Create the directory if it doesn't exist
            os.makedirs(dir_path, exist_ok=True)
            
            # Write the content to 'solution.txt'
            with open(file_path, 'w', encoding='utf-8') as file:
                file.write(content)
            
            print(f"Successfully saved {file_path}")
        
        except requests.exceptions.RequestException as e:
            print(f"Failed to fetch {full_url}: {e}")
